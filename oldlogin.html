<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>jQuery Login</title>

    <script
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous">

    </script>
    <script src="js/script.js"></script>
    <script>
        $(document).ready(function () {
            $("#login").hide();
            $("#loggedin").hide();
            $("#main").empty();
            // console.log("valid login" + hasValidLogin());
            if (hasValidLogin()) {
                $("#login").hide();
                $("#loggedin").show();
                user = JSON.parse(localStorage.getItem('user'));
                // check user group
                groups = user.groups;
                console.log(groups);
                if (groups.includes(2)){
                    $("#main").load("addsite.html");
                }
                else if (groups.includes(1)){
                    $("#main").load("mainmenu.html");
                }
                else if (groups.includes(3)){
                    $("#main").load("dylan.html");
                }


            } else {
                $("#login").show();
                $("#loggedin").hide();

            }

            $("#loginBut").click(function () {
                username = $("#username").val();
                password = $("#password").val();
                login(username, password);
            });

            $("#logoutBut").click(function (){
                logout();

            });
        });
        $(document).ready(function () {
            $("#login").click(function () {
                switch ($("#username").val()) {
                    case "mylesfoster1989":
                        alert("Welcome Site Administrator");
                        break;
                    case "dass10":
                        alert("Welcome Site Administator");
                        break;
                    case "dylan":
                        alert("Public Relationship Clerk");
                        break;
                    case "locngo3003":
                        alert("Welcome Surveys Officer");
                        break;
                    default:
                        alert("Wrong Username or Password");
                        location.reload();
                }
            })
        });
    </script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="style.css">

</head>
<body><style type="text/css">

</style>


<div id="header">
    <table width="100%">
        <tr>
            <td width="60%">NZ Wetlands</td>
            <td id="loginPlace">
                <div id="login">
                    Username: <input type="text" id="username" name="username">
                    Password: <input type="password" id="password" name="password">
                    <button id="loginBut">Login</button>
                </div>
                <div id="loggedin">
                    <button id="logoutBut">log out</button>
                </div>
            </td>
        </tr>
    </table>


</div>
</div>
<div id="main">
    Nz Wetlands
</div>
<div id="footer">
    &copy; Nz Wetlands, Unitec, NZ
</div>
</body>
</html>
